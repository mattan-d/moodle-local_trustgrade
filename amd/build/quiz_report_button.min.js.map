{"version":3,"file":"quiz_report_button.min.js","sources":["../src/quiz_report_button.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n\nvar define = window.define\nvar M = window.M\n\ndefine([\"jquery\", \"core/str\"], ($, Str) => {\n  var QuizReportButton = {\n    init: function (cmid) {\n      this.cmid = cmid || 0\n\n      if (this.cmid > 0) {\n        this.addReportButton()\n      }\n    },\n\n    addReportButton: function () {\n      \n\n      $(document).ready(() => {\n        var reportUrl = M.cfg.wwwroot + \"/local/trustgrade/quiz_report.php?cmid=\" + this.cmid\n\n        Str.get_string(\"ai_quiz_report\", \"local_trustgrade\")\n          .then((buttonText) => {\n            var actionMenu = document.querySelector(\".tertiary-navigation\")\n            var submissionLinks = document.querySelector(\".navitem\")\n\n            if (submissionLinks || actionMenu) {\n              var reportButton = document.createElement(\"a\")\n              reportButton.href = reportUrl\n              reportButton.className = \"btn btn-secondary\"\n              reportButton.innerHTML = '<i class=\"fa fa-chart-bar\"></i> ' + buttonText\n\n              var container = document.createElement(\"div\")\n              container.className = \"navitem ai-quiz-report-button\"\n              container.appendChild(reportButton)\n\n              var targetElement = submissionLinks || (actionMenu ? actionMenu.closest(\".action-menu\") : null)\n              if (targetElement) {\n                targetElement.parentNode.insertBefore(container, targetElement.nextSibling)\n              }\n            }\n          })\n          .catch(() => {\n            // Fallback to English\n            var buttonText = \"AI Quiz Report\"\n\n            var actionMenu = document.querySelector(\".tertiary-navigation\")\n            var submissionLinks = document.querySelector(\".navitem\")\n\n            if (submissionLinks || actionMenu) {\n              var reportButton = document.createElement(\"a\")\n              reportButton.href = reportUrl\n              reportButton.className = \"btn btn-secondary\"\n              reportButton.innerHTML = '<i class=\"fa fa-chart-bar\"></i> ' + buttonText\n\n              var container = document.createElement(\"div\")\n              container.className = \"navitem ai-quiz-report-button\"\n              container.appendChild(reportButton)\n\n              var targetElement = submissionLinks || (actionMenu ? actionMenu.closest(\".action-menu\") : null)\n              if (targetElement) {\n                targetElement.parentNode.insertBefore(container, targetElement.nextSibling)\n              }\n            }\n          })\n      })\n    },\n  }\n\n  return QuizReportButton\n})\n"],"names":["define","window","M","$","Str","init","cmid","this","addReportButton","document","ready","reportUrl","cfg","wwwroot","get_string","then","buttonText","actionMenu","querySelector","submissionLinks","reportButton","createElement","href","className","innerHTML","container","appendChild","targetElement","closest","parentNode","insertBefore","nextSibling","catch"],"mappings":"AAEA,IAAIA,OAASC,OAAOD,OAChBE,EAAID,OAAOC,EAEfF,OAAM,sCAAC,CAAC,SAAU,YAAa,CAACG,EAAGC,OACV,CACrBC,KAAM,SAAUC,MACdC,KAAKD,KAAOA,MAAQ,EAEhBC,KAAKD,KAAO,GACdC,KAAKC,iBAER,EAEDA,gBAAiB,WAGfL,EAAEM,UAAUC,MAAM,KAChB,IAAIC,UAAYT,EAAEU,IAAIC,QAAU,0CAA4CN,KAAKD,KAEjFF,IAAIU,WAAW,iBAAkB,oBAC9BC,KAAMC,aACL,IAAIC,WAAaR,SAASS,cAAc,wBACpCC,gBAAkBV,SAASS,cAAc,YAE7C,GAAIC,iBAAmBF,WAAY,CACjC,IAAIG,aAAeX,SAASY,cAAc,KAC1CD,aAAaE,KAAOX,UACpBS,aAAaG,UAAY,oBACzBH,aAAaI,UAAY,mCAAqCR,WAE9D,IAAIS,UAAYhB,SAASY,cAAc,OACvCI,UAAUF,UAAY,gCACtBE,UAAUC,YAAYN,cAEtB,IAAIO,cAAgBR,kBAAoBF,WAAaA,WAAWW,QAAQ,gBAAkB,MACtFD,eACFA,cAAcE,WAAWC,aAAaL,UAAWE,cAAcI,YAEnE,IAEDC,MAAM,KAEL,IAEIf,WAAaR,SAASS,cAAc,wBACpCC,gBAAkBV,SAASS,cAAc,YAE7C,GAAIC,iBAAmBF,WAAY,CACjC,IAAIG,aAAeX,SAASY,cAAc,KAC1CD,aAAaE,KAAOX,UACpBS,aAAaG,UAAY,oBACzBH,aAAaI,UAAY,iDAEzB,IAAIC,UAAYhB,SAASY,cAAc,OACvCI,UAAUF,UAAY,gCACtBE,UAAUC,YAAYN,cAEtB,IAAIO,cAAgBR,kBAAoBF,WAAaA,WAAWW,QAAQ,gBAAkB,MACtFD,eACFA,cAAcE,WAAWC,aAAaL,UAAWE,cAAcI,YAEnE,KAGR"}
