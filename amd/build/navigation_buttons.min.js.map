{"version":3,"file":"navigation_buttons.min.js","sources":["../src/navigation_buttons.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n\nvar define = window.define\nvar M = window.M\n\ndefine([\"jquery\", \"core/str\"], ($, Str) => {\n  var NavigationButtons = {\n    init: function (cmid) {\n      this.cmid = cmid || 0\n\n      if (this.cmid > 0) {\n        this.addNavigationButtons()\n      }\n    },\n\n    addNavigationButtons: function () {\n      $(document).ready(() => {\n        this.addQuizReportButton()\n        this.addQuestionBankButton()\n      })\n    },\n\n    addQuizReportButton: function () {\n      var reportUrl = M.cfg.wwwroot + \"/local/trustgrade/quiz_report.php?cmid=\" + this.cmid\n\n      Str.get_string(\"ai_quiz_report\", \"local_trustgrade\")\n        .then((buttonText) => {\n          this.createReportButton(reportUrl, buttonText)\n        })\n        .catch(() => {\n          // Fallback to English\n          this.createReportButton(reportUrl, \"AI Quiz Report\")\n        })\n    },\n\n    addQuestionBankButton: function () {\n      var questionBankUrl = M.cfg.wwwroot + \"/local/trustgrade/question_bank.php?cmid=\" + this.cmid\n\n      Str.get_string(\"question_bank\", \"local_trustgrade\")\n        .then((buttonText) => {\n          this.createQuestionBankButton(questionBankUrl, buttonText)\n        })\n        .catch(() => {\n          // Fallback to English\n          this.createQuestionBankButton(questionBankUrl, \"Question Bank\")\n        })\n    },\n\n    createReportButton: (url, buttonText) => {\n      var actionMenu = document.querySelector(\".tertiary-navigation\")\n      var submissionLinks = document.querySelector(\".navitem\")\n\n      if (submissionLinks || actionMenu) {\n        var reportButton = document.createElement(\"a\")\n        reportButton.href = url\n        reportButton.className = \"btn btn-secondary\"\n        reportButton.innerHTML = '<i class=\"fa fa-chart-bar\"></i> ' + buttonText\n\n        var container = document.createElement(\"div\")\n        container.className = \"navitem ai-quiz-report-button\"\n        container.appendChild(reportButton)\n\n        var targetElement = submissionLinks || (actionMenu ? actionMenu.closest(\".action-menu\") : null)\n        if (targetElement) {\n          targetElement.parentNode.insertBefore(container, targetElement.nextSibling)\n        }\n      }\n    },\n\n    createQuestionBankButton: (url, buttonText) => {\n      var actionMenu = document.querySelector(\".tertiary-navigation\")\n      var submissionLinks = document.querySelector(\".navitem\")\n      var existingReportButton = document.querySelector(\".ai-quiz-report-button\")\n\n      if ((submissionLinks || actionMenu) && existingReportButton) {\n        var questionBankButton = document.createElement(\"a\")\n        questionBankButton.href = url\n        questionBankButton.className = \"btn btn-secondary\"\n        questionBankButton.innerHTML = '<i class=\"fa fa-question-circle\"></i> ' + buttonText\n\n        var container = document.createElement(\"div\")\n        container.className = \"navitem ai-question-bank-button\"\n        container.appendChild(questionBankButton)\n\n        // Insert after the quiz report button\n        existingReportButton.parentNode.insertBefore(container, existingReportButton.nextSibling)\n      }\n    },\n  }\n\n  return NavigationButtons\n})\n"],"names":["define","window","M","$","Str","init","cmid","this","addNavigationButtons","document","ready","addQuizReportButton","addQuestionBankButton","reportUrl","cfg","wwwroot","get_string","then","buttonText","createReportButton","catch","questionBankUrl","createQuestionBankButton","url","actionMenu","querySelector","submissionLinks","reportButton","createElement","href","className","innerHTML","container","appendChild","targetElement","closest","parentNode","insertBefore","nextSibling","existingReportButton","questionBankButton"],"mappings":"AAEA,IAAIA,OAASC,OAAOD,OAChBE,EAAID,OAAOC,EAEfF,OAAM,sCAAC,CAAC,SAAU,YAAa,CAACG,EAAGC,OACT,CACtBC,KAAM,SAAUC,MACdC,KAAKD,KAAOA,MAAQ,EAEhBC,KAAKD,KAAO,GACdC,KAAKC,sBAER,EAEDA,qBAAsB,WACpBL,EAAEM,UAAUC,MAAM,KAChBH,KAAKI,sBACLJ,KAAKK,yBAER,EAEDD,oBAAqB,WACnB,IAAIE,UAAYX,EAAEY,IAAIC,QAAU,0CAA4CR,KAAKD,KAEjFF,IAAIY,WAAW,iBAAkB,oBAC9BC,KAAMC,aACLX,KAAKY,mBAAmBN,UAAWK,cAEpCE,MAAM,KAELb,KAAKY,mBAAmBN,UAAW,mBAExC,EAEDD,sBAAuB,WACrB,IAAIS,gBAAkBnB,EAAEY,IAAIC,QAAU,4CAA8CR,KAAKD,KAEzFF,IAAIY,WAAW,gBAAiB,oBAC7BC,KAAMC,aACLX,KAAKe,yBAAyBD,gBAAiBH,cAEhDE,MAAM,KAELb,KAAKe,yBAAyBD,gBAAiB,kBAEpD,EAEDF,mBAAoBA,CAACI,IAAKL,cACxB,IAAIM,WAAaf,SAASgB,cAAc,wBACpCC,gBAAkBjB,SAASgB,cAAc,YAE7C,GAAIC,iBAAmBF,WAAY,CACjC,IAAIG,aAAelB,SAASmB,cAAc,KAC1CD,aAAaE,KAAON,IACpBI,aAAaG,UAAY,oBACzBH,aAAaI,UAAY,mCAAqCb,WAE9D,IAAIc,UAAYvB,SAASmB,cAAc,OACvCI,UAAUF,UAAY,gCACtBE,UAAUC,YAAYN,cAEtB,IAAIO,cAAgBR,kBAAoBF,WAAaA,WAAWW,QAAQ,gBAAkB,MACtFD,eACFA,cAAcE,WAAWC,aAAaL,UAAWE,cAAcI,YAEnE,GAGFhB,yBAA0BA,CAACC,IAAKL,cAC9B,IAAIM,WAAaf,SAASgB,cAAc,wBACpCC,gBAAkBjB,SAASgB,cAAc,YACzCc,qBAAuB9B,SAASgB,cAAc,0BAElD,IAAKC,iBAAmBF,aAAee,qBAAsB,CAC3D,IAAIC,mBAAqB/B,SAASmB,cAAc,KAChDY,mBAAmBX,KAAON,IAC1BiB,mBAAmBV,UAAY,oBAC/BU,mBAAmBT,UAAY,yCAA2Cb,WAE1E,IAAIc,UAAYvB,SAASmB,cAAc,OACvCI,UAAUF,UAAY,kCACtBE,UAAUC,YAAYO,oBAGtBD,qBAAqBH,WAAWC,aAAaL,UAAWO,qBAAqBD,YAC/E"}
