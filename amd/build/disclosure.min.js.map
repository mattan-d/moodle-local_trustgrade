{"version":3,"file":"disclosure.min.js","sources":["../src/disclosure.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n\nvar define = window.define\nvar M = window.M\n\ndefine([\"jquery\", \"core/notification\"], ($, Notification) => {\n  var Disclosure = {\n    init: function (cmid, disclosureHtml) {\n      this.cmid = cmid || 0\n      this.disclosureHtml = disclosureHtml || \"\"\n      this.injectDisclosure()\n    },\n\n    injectDisclosure: function () {\n      if (!this.disclosureHtml) {\n        return\n      }\n\n      // Wait for DOM to be ready\n      $(document).ready(() => {\n        this.insertDisclosureIntoForm()\n        this.bindEvents()\n      })\n    },\n\n    insertDisclosureIntoForm: function () {\n      // Find the submission form\n      var $form = $(\"form.mform, form[data-form-type='submission'], #region-main form\").first()\n\n      if ($form.length > 0) {\n        // Check if disclosure already exists\n        if ($form.find(\".ai-disclosure-container\").length > 0) {\n          return // Already inserted\n        }\n\n        // Find the best insertion point\n        var $insertionPoint = $form.find(\".fitem\").first()\n\n        if ($insertionPoint.length === 0) {\n          $insertionPoint = $form.find(\".form-group\").first()\n        }\n\n        if ($insertionPoint.length === 0) {\n          $insertionPoint = $form.children().first()\n        }\n\n        if ($insertionPoint.length > 0) {\n          // Insert disclosure before the first form element\n          $insertionPoint.before(this.disclosureHtml)\n        } else {\n          // Fallback: prepend to form\n          $form.prepend(this.disclosureHtml)\n        }\n      }\n    },\n\n    bindEvents: () => {\n      // Add click handlers for collapsible content\n      $(document).on(\"click\", \".ai-disclosure-toggle\", function (e) {\n        e.preventDefault()\n        var targetId = $(this).data(\"target\")\n        var $target = $(targetId)\n        var $icon = $(this).find(\"i\")\n\n        if ($target.length > 0) {\n          if ($target.is(\":visible\")) {\n            $target.slideUp(200)\n            $icon.removeClass(\"fa-chevron-up\").addClass(\"fa-chevron-down\")\n          } else {\n            $target.slideDown(200)\n            $icon.removeClass(\"fa-chevron-down\").addClass(\"fa-chevron-up\")\n          }\n        }\n      })\n\n      // Add hover effects\n      $(document).on(\"mouseenter\", \".ai-disclosure-toggle\", function () {\n        $(this).css(\"text-decoration\", \"underline\")\n      })\n\n      $(document).on(\"mouseleave\", \".ai-disclosure-toggle\", function () {\n        $(this).css(\"text-decoration\", \"none\")\n      })\n    },\n  }\n\n  return Disclosure\n})\n"],"names":["define","window","M","$","Notification","init","cmid","disclosureHtml","this","injectDisclosure","document","ready","insertDisclosureIntoForm","bindEvents","$form","first","length","find","$insertionPoint","children","before","prepend","on","e","preventDefault","targetId","data","$target","$icon","is","slideUp","removeClass","addClass","slideDown","css"],"mappings":"AAEA,IAAIA,OAASC,OAAOD,OACZC,OAAOC,EAEfF,OAAM,8BAAC,CAAC,SAAU,qBAAsB,CAACG,EAAGC,gBACzB,CACfC,KAAM,SAAUC,KAAMC,gBACpBC,KAAKF,KAAOA,MAAQ,EACpBE,KAAKD,eAAiBA,gBAAkB,GACxCC,KAAKC,kBACN,EAEDA,iBAAkB,WACXD,KAAKD,gBAKVJ,EAAEO,UAAUC,MAAM,KAChBH,KAAKI,2BACLJ,KAAKK,cAER,EAEDD,yBAA0B,WAExB,IAAIE,MAAQX,EAAE,oEAAoEY,QAElF,GAAID,MAAME,OAAS,EAAG,CAEpB,GAAIF,MAAMG,KAAK,4BAA4BD,OAAS,EAClD,OAIF,IAAIE,gBAAkBJ,MAAMG,KAAK,UAAUF,QAEZ,IAA3BG,gBAAgBF,SAClBE,gBAAkBJ,MAAMG,KAAK,eAAeF,SAGf,IAA3BG,gBAAgBF,SAClBE,gBAAkBJ,MAAMK,WAAWJ,SAGjCG,gBAAgBF,OAAS,EAE3BE,gBAAgBE,OAAOZ,KAAKD,gBAG5BO,MAAMO,QAAQb,KAAKD,eAEvB,CACD,EAEDM,WAAYA,KAEVV,EAAEO,UAAUY,GAAG,QAAS,wBAAyB,SAAUC,GACzDA,EAAEC,iBACF,IAAIC,SAAWtB,EAAEK,MAAMkB,KAAK,UACxBC,QAAUxB,EAAEsB,UACZG,MAAQzB,EAAEK,MAAMS,KAAK,KAErBU,QAAQX,OAAS,IACfW,QAAQE,GAAG,aACbF,QAAQG,QAAQ,KAChBF,MAAMG,YAAY,iBAAiBC,SAAS,qBAE5CL,QAAQM,UAAU,KAClBL,MAAMG,YAAY,mBAAmBC,SAAS,kBAGpD,GAGA7B,EAAEO,UAAUY,GAAG,aAAc,wBAAyB,WACpDnB,EAAEK,MAAM0B,IAAI,kBAAmB,YACjC,GAEA/B,EAAEO,UAAUY,GAAG,aAAc,wBAAyB,WACpDnB,EAAEK,MAAM0B,IAAI,kBAAmB,OACjC"}