{"version":3,"file":"question_bank_button.min.js","sources":["../src/question_bank_button.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n\nvar define = window.define\nvar M = window.M\n\ndefine([\"jquery\", \"core/str\"], ($, Str) => {\n  var QuestionBankButton = {\n    init: function (cmid) {\n      this.cmid = cmid || 0\n\n      if (this.cmid > 0) {\n        this.addQuestionBankButton()\n      }\n    },\n\n    addQuestionBankButton: function () {\n      $(document).ready(() => {\n        var questionBankUrl = M.cfg.wwwroot + \"/local/trustgrade/question_bank.php?cmid=\" + this.cmid\n\n        Str.get_string(\"question_bank\", \"local_trustgrade\")\n          .then((buttonText) => {\n            this.createButton(questionBankUrl, buttonText)\n          })\n          .catch(() => {\n            // Fallback to English\n            this.createButton(questionBankUrl, \"Question Bank\")\n          })\n      })\n    },\n\n    createButton: (url, buttonText) => {\n      var actionMenu = document.querySelector(\".tertiary-navigation\")\n      var submissionLinks = document.querySelector(\".navitem\")\n      var existingReportButton = document.querySelector(\".ai-quiz-report-button\")\n\n      if ((submissionLinks || actionMenu) && existingReportButton) {\n        var questionBankButton = document.createElement(\"a\")\n        questionBankButton.href = url\n        questionBankButton.className = \"btn btn-secondary\"\n        questionBankButton.innerHTML = '<i class=\"fa fa-question-circle\"></i> ' + buttonText\n\n        var container = document.createElement(\"div\")\n        container.className = \"navitem ai-question-bank-button\"\n        container.appendChild(questionBankButton)\n\n        // Insert after the quiz report button\n        existingReportButton.parentNode.insertBefore(container, existingReportButton.nextSibling)\n      }\n    },\n  }\n\n  return QuestionBankButton\n})\n"],"names":["define","window","M","$","Str","init","cmid","this","addQuestionBankButton","document","ready","questionBankUrl","cfg","wwwroot","get_string","then","buttonText","createButton","catch","url","actionMenu","querySelector","submissionLinks","existingReportButton","questionBankButton","createElement","href","className","innerHTML","container","appendChild","parentNode","insertBefore","nextSibling"],"mappings":"AAEA,IAAIA,OAASC,OAAOD,OAChBE,EAAID,OAAOC,EAEfF,OAAM,wCAAC,CAAC,SAAU,YAAa,CAACG,EAAGC,OACR,CACvBC,KAAM,SAAUC,MACdC,KAAKD,KAAOA,MAAQ,EAEhBC,KAAKD,KAAO,GACdC,KAAKC,uBAER,EAEDA,sBAAuB,WACrBL,EAAEM,UAAUC,MAAM,KAChB,IAAIC,gBAAkBT,EAAEU,IAAIC,QAAU,4CAA8CN,KAAKD,KAEzFF,IAAIU,WAAW,gBAAiB,oBAC7BC,KAAMC,aACLT,KAAKU,aAAaN,gBAAiBK,cAEpCE,MAAM,KAELX,KAAKU,aAAaN,gBAAiB,oBAG1C,EAEDM,aAAcA,CAACE,IAAKH,cAClB,IAAII,WAAaX,SAASY,cAAc,wBACpCC,gBAAkBb,SAASY,cAAc,YACzCE,qBAAuBd,SAASY,cAAc,0BAElD,IAAKC,iBAAmBF,aAAeG,qBAAsB,CAC3D,IAAIC,mBAAqBf,SAASgB,cAAc,KAChDD,mBAAmBE,KAAOP,IAC1BK,mBAAmBG,UAAY,oBAC/BH,mBAAmBI,UAAY,yCAA2CZ,WAE1E,IAAIa,UAAYpB,SAASgB,cAAc,OACvCI,UAAUF,UAAY,kCACtBE,UAAUC,YAAYN,oBAGtBD,qBAAqBQ,WAAWC,aAAaH,UAAWN,qBAAqBU,YAC/E"}