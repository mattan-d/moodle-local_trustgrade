{"version":3,"file":"trustgrade.min.js","sources":["../src/trustgrade.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n\nvar define = window.define // Declare define variable\nvar M = window.M // Declare M variable\nvar tinyMCE = window.tinyMCE // Declare tinyMCE variable\n\ndefine([\"jquery\", \"core/ajax\", \"core/notification\", \"core/str\", \"core/modal_factory\", \"core/templates\"], (\n  $,\n  Ajax,\n  Notification,\n  Str,\n  ModalFactory,\n  Templates,\n) => {\n  var trustgrade = {\n    init: function () {\n      this.bindEvents()\n      this.loadQuestionBank() // Load existing questions on page load\n    },\n\n    bindEvents: () => {\n      $(document).on(\"click\", \"#check-instructions-btn\", (e) => {\n        e.preventDefault()\n        trustgrade.checkInstructions()\n      })\n      $(document).on(\"click\", \"#generate-questions-btn\", (e) => {\n        e.preventDefault()\n        trustgrade.generateQuestions()\n      })\n      $(document).on(\"change\", \"#id_trustgrade_questions_to_generate\", (e) => {\n        e.preventDefault()\n        trustgrade.updateSingleQuizSetting(\"questions_to_generate\", $(e.target).val())\n      })\n    },\n\n    showErrorModal: (title, message) => {\n      ModalFactory.create({\n        type: ModalFactory.types.ALERT,\n        title: title,\n        body: message,\n      }).then((modal) => modal.show())\n    },\n\n    showSuccessNotification: (message) => {\n      Notification.addNotification({ message: message, type: \"success\" })\n    },\n\n    updateSingleQuizSetting: function (settingName, settingValue) {\n      var cmid = this.getCourseModuleId()\n      if (cmid <= 0) return\n\n      var promises = Ajax.call([\n        {\n          methodname: \"local_trustgrade_update_quiz_setting\",\n          args: {\n            cmid: cmid,\n            setting_name: settingName,\n            setting_value: settingValue,\n          },\n        },\n      ])\n\n      promises[0]\n        .done((response) => {\n          if (response.success) {\n            Str.get_string(\"setting_updated_success\", \"local_trustgrade\", {\n              setting: settingName.replace(/_/g, \" \"),\n            }).then((message) => {\n              trustgrade.showSuccessNotification(message)\n            })\n          } else {\n            Str.get_string(\"setting_update_error\", \"local_trustgrade\").then((title) => {\n              trustgrade.showErrorModal(title, response.error || \"An error occurred while updating the setting.\")\n            })\n          }\n        })\n        .fail(Notification.exception)\n    },\n\n    /**\n     * Basic HTML escape to avoid XSS in rendered content.\n     */\n    escapeHtml: (value) => {\n      if (value === null || value === undefined) return \"\"\n      return String(value).replace(/[&<>\"']/g, (s) => {\n        const map = { \"&\": \"&amp;\", \"<\": \"&lt;\", \">\": \"&gt;\", '\"': \"&quot;\", \"'\": \"&#39;\" }\n        return map[s] || s\n      })\n    },\n\n    /**\n     * Render the recommendation using Mustache templates and localized strings.\n     * Supports both legacy string format and structured JSON objects.\n     */\n    renderRecommendation: (recommendation) => {\n      return new Promise((resolve) => {\n        Promise.all([\n          Str.get_string(\"criteria_evaluation\", \"local_trustgrade\"),\n          Str.get_string(\"criterion\", \"local_trustgrade\"),\n          Str.get_string(\"met\", \"local_trustgrade\"),\n          Str.get_string(\"suggestions\", \"local_trustgrade\"),\n          Str.get_string(\"evaluation\", \"local_trustgrade\"),\n          Str.get_string(\"improved_assignment\", \"local_trustgrade\"),\n          Str.get_string(\"no_criteria_provided\", \"local_trustgrade\"),\n          Str.get_string(\"recommendation_error\", \"local_trustgrade\"),\n        ]).then((strings) => {\n          const [\n            criteriaEvaluation,\n            criterion,\n            met,\n            suggestions,\n            evaluation,\n            improvedAssignment,\n            noCriteriaProvided,\n            recommendationError,\n          ] = strings\n\n          const localizedStrings = {\n            criteria_evaluation: criteriaEvaluation,\n            criterion: criterion,\n            met: met,\n            suggestions: suggestions,\n            evaluation: evaluation,\n            improved_assignment: improvedAssignment,\n            no_criteria_provided: noCriteriaProvided,\n            recommendation_error: recommendationError,\n          }\n\n          try {\n            // Legacy string fallback\n            if (typeof recommendation === \"string\") {\n              const content = recommendation.replace(/\\n/g, \"<br>\")\n              resolve(content)\n              return\n            }\n\n            // If it's not an object, stringify and fallback to legacy behavior\n            if (!recommendation || typeof recommendation !== \"object\") {\n              try {\n                const txt = JSON.stringify(recommendation, null, 2)\n                resolve(trustgrade.escapeHtml(txt).replace(/\\n/g, \"<br>\"))\n                return\n              } catch (e) {\n                resolve(\"\")\n                return\n              }\n            }\n\n            const table = recommendation.table || {}\n            const rows = Array.isArray(table.rows) ? table.rows : []\n            const tableTitle = table.title || criteriaEvaluation\n\n            const processedRows = rows.map((row) => {\n              const metValue = (row[\"Met\"] || row[\"Met (y/n)\"] || \"\").toLowerCase()\n              return {\n                Criterion: row[\"Criterion\"] || \"\",\n                Met: row[\"Met\"] || row[\"Met (y/n)\"] || \"\",\n                Suggestions: row[\"Suggestions\"] || \"\",\n                isMetYes: metValue === \"yes\" || metValue === \"y\" || metValue === \"true\",\n                isMetNo: metValue === \"no\" || metValue === \"n\" || metValue === \"false\",\n                isMetPartial: metValue === \"partial\" || metValue === \"partially\" || metValue === \"maybe\",\n              }\n            })\n\n            let html = \"\"\n\n            // Render table section\n            const tableContext = {\n              title: tableTitle,\n              rows: processedRows,\n              strings: localizedStrings,\n            }\n\n            Templates.render(\"local_trustgrade/recommendation_table\", tableContext)\n              .then((tableHtml) => {\n                html += tableHtml\n\n                // Render evaluation section\n                const evalText =\n                  recommendation.EvaluationText && recommendation.EvaluationText.content\n                    ? String(recommendation.EvaluationText.content).replace(/\\n/g, \"<br>\")\n                    : \"\"\n\n                if (evalText) {\n                  const evalContext = {\n                    title: evaluation,\n                    content: evalText,\n                    icon: \"fa fa-clipboard-check\",\n                    sectionClass: \"tg-eval-text\",\n                  }\n\n                  return Templates.render(\"local_trustgrade/recommendation_section\", evalContext)\n                }\n                return \"\"\n              })\n              .then((evalHtml) => {\n                html += evalHtml\n\n                // Render improved assignment section\n                const improved =\n                  recommendation.ImprovedAssignment && recommendation.ImprovedAssignment.content\n                    ? String(recommendation.ImprovedAssignment.content).replace(/\\n/g, \"<br>\")\n                    : \"\"\n\n                if (improved) {\n                  const improvedContext = {\n                    title: improvedAssignment,\n                    content: improved,\n                    icon: \"fa fa-lightbulb\",\n                    sectionClass: \"tg-improved\",\n                  }\n\n                  return Templates.render(\"local_trustgrade/recommendation_section\", improvedContext)\n                }\n                return \"\"\n              })\n              .then((improvedHtml) => {\n                html += improvedHtml\n                resolve(html)\n              })\n              .catch((error) => {\n                console.error(\"Template rendering error:\", error)\n                resolve(trustgrade.renderRecommendationLegacy(recommendation, localizedStrings))\n              })\n          } catch (error) {\n            console.error(\"Recommendation rendering error:\", error)\n            resolve(`<div class=\"alert alert-danger\">${recommendationError}</div>`)\n          }\n        })\n      })\n    },\n\n    /**\n     * Legacy fallback rendering method with localized strings\n     */\n    renderRecommendationLegacy: (recommendation, strings) => {\n      const table = recommendation.table || {}\n      const rows = Array.isArray(table.rows) ? table.rows : []\n      const tableTitle = table.title || strings.criteria_evaluation\n\n      const evalText =\n        recommendation.EvaluationText && recommendation.EvaluationText.content\n          ? String(recommendation.EvaluationText.content)\n          : \"\"\n      const improved =\n        recommendation.ImprovedAssignment && recommendation.ImprovedAssignment.content\n          ? String(recommendation.ImprovedAssignment.content)\n          : \"\"\n\n      let html = \"\"\n\n      // Table section with modern styling\n      html += `<div class=\"tg-section tg-table-section mb-4\">`\n      if (tableTitle) {\n        html += `<h4 class=\"mb-3 text-primary fw-semibold\">${trustgrade.escapeHtml(tableTitle)}</h4>`\n      }\n      html += `\n        <div class=\"table-responsive shadow-sm rounded\">\n          <table class=\"table table-hover table-striped mb-0 modern-criteria-table\">\n            <thead class=\"table-dark\">\n              <tr>\n                <th scope=\"col\" class=\"fw-semibold\">${trustgrade.escapeHtml(strings.criterion)}</th>\n                <th scope=\"col\" class=\"fw-semibold text-center\" style=\"width: 100px;\">${trustgrade.escapeHtml(strings.met)}</th>\n                <th scope=\"col\" class=\"fw-semibold\">${trustgrade.escapeHtml(strings.suggestions)}</th>\n              </tr>\n            </thead>\n            <tbody>\n      `\n      if (rows.length > 0) {\n        rows.forEach((r) => {\n          const c = trustgrade.escapeHtml(r[\"Criterion\"] ?? \"\")\n          const m = trustgrade.escapeHtml(r[\"Met\"] ?? r[\"Met (y/n)\"] ?? \"\")\n          const s = trustgrade.escapeHtml(r[\"Suggestions\"] ?? \"\")\n          const metValue = m.toLowerCase()\n\n          let metBadge = `<span class=\"badge bg-secondary rounded-pill\">${m}</span>`\n          if (metValue === \"yes\" || metValue === \"y\" || metValue === \"true\") {\n            metBadge = `<span class=\"badge bg-success rounded-pill\"><i class=\"fa fa-check me-1\"></i>${m}</span>`\n          } else if (metValue === \"no\" || metValue === \"n\" || metValue === \"false\") {\n            metBadge = `<span class=\"badge bg-danger rounded-pill\"><i class=\"fa fa-times me-1\"></i>${m}</span>`\n          } else if (metValue === \"partial\" || metValue === \"partially\" || metValue === \"maybe\") {\n            metBadge = `<span class=\"badge bg-warning rounded-pill\"><i class=\"fa fa-minus me-1\"></i>${m}</span>`\n          }\n\n          html += `\n              <tr class=\"criteria-row\">\n                <td class=\"criterion-cell\"><div class=\"fw-medium text-dark\">${c}</div></td>\n                <td class=\"met-cell text-center\">${metBadge}</td>\n                <td class=\"suggestions-cell\"><div class=\"text-muted small\">${s}</div></td>\n              </tr>\n          `\n        })\n      } else {\n        html += `\n              <tr>\n                <td colspan=\"3\" class=\"text-center text-muted py-4\">\n                  <i class=\"fa fa-info-circle me-2\"></i>${trustgrade.escapeHtml(strings.no_criteria_provided)}\n                </td>\n              </tr>\n        `\n      }\n      html += `\n            </tbody>\n          </table>\n        </div>\n      </div>\n      `\n\n      // Evaluation Text section\n      if (evalText) {\n        html += `<div class=\"tg-section tg-eval-text mb-4\">\n          <div class=\"card border-0 shadow-sm\">\n            <div class=\"card-header bg-light border-0 py-3\">\n              <h4 class=\"card-title mb-0 d-flex align-items-center\">\n                <i class=\"fa fa-clipboard-check me-2 text-primary\"></i>\n                ${trustgrade.escapeHtml(strings.evaluation)}\n              </h4>\n            </div>\n            <div class=\"card-body\">\n              <div class=\"recommendation-content\">${trustgrade.escapeHtml(evalText).replace(/\\n/g, \"<br>\")}</div>\n            </div>\n          </div>\n        </div>`\n      }\n\n      // Improved Assignment section\n      if (improved) {\n        html += `<div class=\"tg-section tg-improved mb-4\">\n          <div class=\"card border-0 shadow-sm\">\n            <div class=\"card-header bg-light border-0 py-3\">\n              <h4 class=\"card-title mb-0 d-flex align-items-center\">\n                <i class=\"fa fa-lightbulb me-2 text-primary\"></i>\n                ${trustgrade.escapeHtml(strings.improved_assignment)}\n              </h4>\n            </div>\n            <div class=\"card-body\">\n              <div class=\"recommendation-content\">${trustgrade.escapeHtml(improved).replace(/\\n/g, \"<br>\")}</div>\n            </div>\n          </div>\n        </div>`\n      }\n\n      return html\n    },\n\n    checkInstructions: function () {\n      var instructions = this.getInstructions()\n      if (!instructions || instructions.trim().length === 0) {\n        Str.get_string(\"no_instructions_error\", \"local_trustgrade\").then((message) => {\n          Str.get_string(\"input_validation_error\", \"local_trustgrade\").then((title) => {\n            trustgrade.showErrorModal(title, message)\n          })\n        })\n        return\n      }\n\n      $(\"#check-instructions-btn\").prop(\"disabled\", true)\n      $(\"#ai-loading\").show()\n      $(\"#ai-recommendation-container\").hide()\n\n      var cmid = this.getCourseModuleId()\n\n      var promises = Ajax.call([\n        {\n          methodname: \"local_trustgrade_check_instructions\",\n          args: {\n            cmid: cmid,\n            instructions: instructions,\n            intro_itemid: trustgrade.getIntroEditorItemId(),\n            intro_attachments_itemid: trustgrade.getIntroAttachmentsItemId(),\n          },\n        },\n      ])\n\n      promises[0]\n        .done((response) => {\n          if (response.success) {\n            try {\n              var recObj =\n                typeof response.recommendation === \"string\"\n                  ? JSON.parse(response.recommendation)\n                  : response.recommendation\n\n              trustgrade.renderRecommendation(recObj).then((recommendationHtml) => {\n                if (response.from_cache) {\n                  Str.get_string(\"cache_hit\", \"local_trustgrade\").then((cacheMessage) => {\n                    recommendationHtml =\n                      '<div class=\"alert alert-info mb-2\"><i class=\"fa fa-clock-o\"></i> <small>' +\n                      cacheMessage +\n                      \" (Debug mode)</small></div>\" +\n                      recommendationHtml\n                    $(\"#ai-recommendation\").html(recommendationHtml)\n                  })\n                } else {\n                  $(\"#ai-recommendation\").html(recommendationHtml)\n                }\n                $(\"#ai-recommendation-container\").show()\n              })\n            } catch (e) {\n              // Fallback to legacy plaintext if JSON parsing fails\n              const recommendationHtml = String(response.recommendation || \"\").replace(/\\n/g, \"<br>\")\n              $(\"#ai-recommendation\").html(recommendationHtml)\n              $(\"#ai-recommendation-container\").show()\n            }\n          } else {\n            Str.get_string(\"gateway_error\", \"local_trustgrade\").then((title) => {\n              trustgrade.showErrorModal(title, response.error || \"An error occurred.\")\n            })\n          }\n        })\n        .fail(Notification.exception)\n        .always(() => {\n          $(\"#check-instructions-btn\").prop(\"disabled\", false)\n          $(\"#ai-loading\").hide()\n        })\n    },\n\n    generateQuestions: function () {\n      var instructions = this.getInstructions()\n      if (!instructions || instructions.trim().length === 0) {\n        Str.get_string(\"no_instructions_questions_error\", \"local_trustgrade\").then((message) => {\n          Str.get_string(\"input_validation_error\", \"local_trustgrade\").then((title) => {\n            trustgrade.showErrorModal(title, message)\n          })\n        })\n        return\n      }\n\n      $(\"#generate-questions-btn\").prop(\"disabled\", true)\n      $(\"#ai-question-loading\").show()\n      $(\"#ai-questions-container\").hide()\n\n      var cmid = this.getCourseModuleId()\n\n      var promises = Ajax.call([\n        {\n          methodname: \"local_trustgrade_generate_questions\",\n          args: {\n            cmid: cmid,\n            instructions: instructions,\n            intro_itemid: trustgrade.getIntroEditorItemId(),\n            intro_attachments_itemid: trustgrade.getIntroAttachmentsItemId(),\n          },\n        },\n      ])\n\n      promises[0]\n        .done((response) => {\n          if (response.success) {\n            // response.questions is expected to be a JSON string representing the NEW pattern:\n            // [\n            //   {\n            //     id, type, text,\n            //     options: [{ id, text, is_correct, explanation }],\n            //     metadata: { blooms_level, points }\n            //   }\n            // ]\n            var questions = typeof response.questions === \"string\" ? JSON.parse(response.questions) : response.questions\n\n            trustgrade.formatQuestionsDisplay(questions).then((questionsHtml) => {\n              if (response.from_cache) {\n                Str.get_string(\"cache_hit\", \"local_trustgrade\").then((cacheMessage) => {\n                  questionsHtml =\n                    '<div class=\"alert alert-info mb-2\"><i class=\"fa fa-clock-o\"></i> <small>' +\n                    cacheMessage +\n                    \" (Debug mode)</small></div>\" +\n                    questionsHtml\n                  $(\"#ai-questions\").html(questionsHtml)\n                })\n              } else {\n                $(\"#ai-questions\").html(questionsHtml)\n              }\n              $(\"#ai-questions-container\").show()\n            })\n\n            if (response.message) {\n              trustgrade.showSuccessNotification(response.message)\n            }\n            trustgrade.loadQuestionBank()\n          } else {\n            Str.get_string(\"gateway_error\", \"local_trustgrade\").then((title) => {\n              trustgrade.showErrorModal(title, response.error || \"An error occurred.\")\n            })\n          }\n        })\n        .fail(Notification.exception)\n        .always(() => {\n          $(\"#generate-questions-btn\").prop(\"disabled\", false)\n          $(\"#ai-question-loading\").hide()\n        })\n    },\n\n    /**\n     * Format the AI-generated questions for display (NEW JSON PATTERN ONLY).\n     * - No difficulty field.\n     * - Per-option explanations.\n     * - Points are in question.metadata.points.\n     */\n    formatQuestionsDisplay: (questions) =>\n      new Promise((resolve) => {\n        Promise.all([\n          Str.get_string(\"generated_questions\", \"local_trustgrade\"),\n          Str.get_string(\"question\", \"local_trustgrade\"),\n          Str.get_string(\"points\", \"local_trustgrade\"),\n          Str.get_string(\"correct\", \"local_trustgrade\"),\n          Str.get_string(\"explanation\", \"local_trustgrade\"),\n        ]).then((strings) => {\n          const [sGeneratedQuestions, sQuestion, sPoints, sCorrect, sExplanation] = strings\n\n          let html = \"<h4>\" + sGeneratedQuestions + \":</h4>\"\n\n          if (!Array.isArray(questions) || questions.length === 0) {\n            html += `<div style=\"color:#666;\">${trustgrade.escapeHtml(\"No questions generated.\")}</div>`\n            resolve(html)\n            return\n          }\n\n          questions.forEach((q, index) => {\n            const qType = q && q.type ? String(q.type) : \"\"\n            const qText = q && q.text ? String(q.text) : \"\"\n            const points =\n              q && q.metadata && (typeof q.metadata.points === \"number\" || typeof q.metadata.points === \"string\")\n                ? String(q.metadata.points)\n                : \"\"\n            const blooms = q && q.metadata && q.metadata.blooms_level ? String(q.metadata.blooms_level) : \"\"\n\n            html += `<div class=\"question-item\" style=\"margin-bottom: 20px; padding: 15px; border: 1px solid #ddd; border-radius: 5px;\">`\n\n            // Header line: \"Question X (Y points)\" if points exist\n            let header = `${sQuestion} ${index + 1}`\n            if (points !== \"\") {\n              header += ` (${trustgrade.escapeHtml(points)} ${sPoints})`\n            }\n            html += `<h5>${trustgrade.escapeHtml(header)}</h5>`\n\n            if (qType) {\n              html += `<p><strong>Type:</strong> ${trustgrade.escapeHtml(qType)}</p>`\n            }\n\n            html += `<p><strong>${trustgrade.escapeHtml(sQuestion)}:</strong> ${trustgrade.escapeHtml(qText)}</p>`\n\n            if (blooms) {\n              html += `<p><strong>${trustgrade.escapeHtml(\"Bloom's level\")}:</strong> ${trustgrade.escapeHtml(\n                blooms,\n              )}</p>`\n            }\n\n            // Options with per-option explanation\n            if (Array.isArray(q.options) && q.options.length > 0) {\n              html += `<div><strong>Options:</strong></div><ul style=\"margin:6px 0 0 20px;\">`\n              q.options.forEach((opt, optIndex) => {\n                const label = String.fromCharCode(65 + optIndex) + \".\"\n                const optText = opt && opt.text ? String(opt.text) : \"\"\n                const isCorrect = !!(opt && opt.is_correct)\n                const explanation = opt && opt.explanation ? String(opt.explanation) : \"\"\n\n                const correctBadge = isCorrect\n                  ? ` <span class=\"badge badge-success\" style=\"display:inline-block; padding:2px 6px; background:#16a34a; color:#fff; border-radius:4px; font-size:12px;\">${trustgrade.escapeHtml(\n                      sCorrect,\n                    )}</span>`\n                  : \"\"\n\n                html += `<li style=\"margin:6px 0;\">`\n                html += `<div>${trustgrade.escapeHtml(label)} ${trustgrade.escapeHtml(optText)}${correctBadge}</div>`\n                if (explanation) {\n                  html += `<div style=\"margin-left:20px; color:#555;\"><em>${trustgrade.escapeHtml(\n                    sExplanation,\n                  )}:</em> ${trustgrade.escapeHtml(explanation)}</div>`\n                }\n                html += `</li>`\n              })\n              html += `</ul>`\n            }\n\n            html += `</div>`\n          })\n\n          resolve(html)\n        })\n      }),\n\n    getInstructions: () => {\n      var instructions = \"\"\n      var instructionSelectors = [\"#id_introeditor_ifr\", \"#id_intro\", 'textarea[name=\"intro\"]']\n      for (var i = 0; i < instructionSelectors.length; i++) {\n        var $element = $(instructionSelectors[i])\n        if ($element.length > 0) {\n          if ($element.is(\"iframe\")) {\n            try {\n              var iframeDoc = $element[0].contentDocument || $element[0].contentWindow.document\n              instructions = $(\"<div>\").html(iframeDoc.body.innerHTML).text()\n            } catch (e) {\n              if (typeof tinyMCE !== \"undefined\" && tinyMCE.get(\"id_introeditor\")) {\n                instructions = tinyMCE.get(\"id_introeditor\").getContent({ format: \"text\" })\n              }\n            }\n          } else {\n            instructions = $element.val() || \"\"\n          }\n          if (instructions && instructions.trim().length > 0) break\n        }\n      }\n      return typeof instructions === \"string\" ? instructions.trim() : \"\"\n    },\n\n    getCourseModuleId: () => {\n      var urlParams = new URLSearchParams(window.location.search)\n      var cmid = urlParams.get(\"update\")\n      if (!cmid) {\n        cmid = $('input[name=\"coursemodule\"]').val() || 0\n      }\n      return Number.parseInt(cmid) || 0\n    },\n\n    getIntroEditorItemId: () => {\n      var $input = $('input[name=\"introeditor[itemid]\"]')\n      var val = $input.length ? $input.val() : \"\"\n      var n = Number.parseInt(val || \"0\", 10)\n      return isNaN(n) ? 0 : n\n    },\n\n    getIntroAttachmentsItemId: () => {\n      // Try a few common names used by Moodle forms for a filemanager attached to \"intro\"\n      var candidates = [\n        'input[name=\"introattachments\"]',\n        'input[name=\"introattachments_filemanager\"]',\n        'input[name=\"introattachments[itemid]\"]',\n      ]\n      for (var i = 0; i < candidates.length; i++) {\n        var $el = $(candidates[i])\n        if ($el.length) {\n          var v = Number.parseInt($el.val() || \"0\", 10)\n          if (!isNaN(v) && v > 0) return v\n        }\n      }\n      return 0\n    },\n\n    loadQuestionBank: function () {\n      var cmid = this.getCourseModuleId()\n      if (cmid <= 0) return\n\n      $(\"#question-bank-loading\").show()\n\n      var promises = Ajax.call([\n        {\n          methodname: \"local_trustgrade_get_question_bank\",\n          args: { cmid: cmid },\n        },\n      ])\n\n      promises[0]\n        .done((response) => {\n          if (response.success) {\n            var questions = JSON.parse(response.questions)\n            if (questions && questions.length > 0) {\n              Str.get_string(\"question_bank_title\", \"local_trustgrade\").then((title) => {\n                var questionBankHtml = \"<h4>\" + title + \"</h4>\" + response.html\n                $(\"#question-bank-container\").html(questionBankHtml)\n                if (typeof require !== \"undefined\") {\n                  require([\"local_trustgrade/question_editor\"], (QuestionEditor) => {\n                    QuestionEditor.reinitialize(cmid)\n                  })\n                }\n              })\n            } else {\n              $(\"#question-bank-container\").html(\"\")\n            }\n          } else {\n            Notification.addNotification({ message: response.error || \"Failed to load question bank\", type: \"warning\" })\n          }\n        })\n        .fail(Notification.exception)\n        .always(() => {\n          $(\"#question-bank-loading\").hide()\n        })\n    },\n  }\n\n  return trustgrade\n})\n"],"names":["define","window","tinyMCE","M","$","Ajax","Notification","Str","ModalFactory","Templates","trustgrade","init","this","bindEvents","loadQuestionBank","document","on","e","preventDefault","checkInstructions","generateQuestions","updateSingleQuizSetting","target","val","showErrorModal","title","message","create","type","types","ALERT","body","then","modal","show","showSuccessNotification","addNotification","settingName","settingValue","cmid","getCourseModuleId","call","methodname","args","setting_name","setting_value","done","response","success","get_string","setting","replace","error","fail","exception","escapeHtml","value","String","s","renderRecommendation","recommendation","Promise","resolve","all","strings","criteriaEvaluation","criterion","met","suggestions","evaluation","improvedAssignment","noCriteriaProvided","recommendationError","localizedStrings","criteria_evaluation","improved_assignment","no_criteria_provided","recommendation_error","content","txt","JSON","stringify","table","rows","Array","isArray","tableTitle","processedRows","map","row","metValue","toLowerCase","Criterion","Met","Suggestions","isMetYes","isMetNo","isMetPartial","html","tableContext","render","tableHtml","evalText","EvaluationText","evalContext","icon","sectionClass","evalHtml","improved","ImprovedAssignment","improvedContext","improvedHtml","catch","console","renderRecommendationLegacy","length","forEach","r","c","m","metBadge","instructions","getInstructions","trim","prop","hide","intro_itemid","getIntroEditorItemId","intro_attachments_itemid","getIntroAttachmentsItemId","recObj","parse","recommendationHtml","from_cache","cacheMessage","always","questions","formatQuestionsDisplay","questionsHtml","sGeneratedQuestions","sQuestion","sPoints","sCorrect","sExplanation","q","index","qType","qText","text","points","metadata","blooms","blooms_level","header","options","opt","optIndex","label","fromCharCode","optText","isCorrect","is_correct","explanation","correctBadge","instructionSelectors","i","$element","is","iframeDoc","contentDocument","contentWindow","innerHTML","get","getContent","format","URLSearchParams","location","search","Number","parseInt","$input","n","isNaN","candidates","$el","v","questionBankHtml","require","QuestionEditor","reinitialize"],"mappings":"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"}
