var define=window.define,M=window.M;define("local_trustgrade/question_bank_button",["jquery","core/str"],($,Str)=>({init:function(cmid){this.cmid=cmid||0,this.cmid>0&&this.addQuestionBankButton()},addQuestionBankButton:function(){this.tryAddButton(),$(document).ready(()=>{this.tryAddButton()}),setTimeout(()=>{this.tryAddButton()},500),setTimeout(()=>{this.tryAddButton()},2e3)},tryAddButton:function(){if(!document.querySelector(".ai-question-bank-button")){var questionBankUrl=M.cfg.wwwroot+"/local/trustgrade/question_bank.php?cmid="+this.cmid;Str.get_string("question_bank","local_trustgrade").then(buttonText=>{this.createButton(questionBankUrl,buttonText)}).catch(()=>{this.createButton(questionBankUrl,"Question Bank")})}},createButton:(url,buttonText)=>{if(!document.querySelector(".ai-question-bank-button")){var questionBankButton=document.createElement("a");questionBankButton.href=url,questionBankButton.className="btn btn-secondary",questionBankButton.innerHTML='<i class="fa fa-question-circle"></i> '+buttonText;var buttonContainer=document.createElement("div");buttonContainer.className="navitem ai-question-bank-button",buttonContainer.appendChild(questionBankButton);var actionMenu=document.querySelector(".tertiary-navigation"),submissionLinks=document.querySelector(".navitem"),existingReportButton=document.querySelector(".ai-quiz-report-button"),targetContainer=null,insertMethod="append",referenceElement=null;if(existingReportButton&&(submissionLinks||actionMenu))targetContainer=existingReportButton.parentNode,insertMethod="after",referenceElement=existingReportButton;else if(actionMenu)targetContainer=actionMenu,insertMethod="append";else if(submissionLinks)targetContainer=submissionLinks.parentNode||submissionLinks,insertMethod="append";else for(var navContainers=[".navbar-nav",".nav",".navigation",".page-header-headings",".page-context-header"],i=0;i<navContainers.length;i++){var container=document.querySelector(navContainers[i]);if(container){targetContainer=container,insertMethod="append";break}}if(targetContainer)switch(insertMethod){case"after":referenceElement&&referenceElement.nextSibling?targetContainer.insertBefore(buttonContainer,referenceElement.nextSibling):targetContainer.appendChild(buttonContainer);break;case"before":targetContainer.insertBefore(buttonContainer,referenceElement);break;case"prepend":targetContainer.insertBefore(buttonContainer,targetContainer.firstChild);break;default:targetContainer.appendChild(buttonContainer)}}}}));

//# sourceMappingURL=question_bank_button.min.js.map
